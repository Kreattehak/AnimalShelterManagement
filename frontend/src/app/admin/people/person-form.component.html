<div class="container">
  <form [formGroup]="personForm" class="form-horizontal" novalidate (ngSubmit)="onSubmit(activePerson.id)">
    <fieldset>

      <legend *ngIf="isNewPerson; else oldPersonLegend">
        Add new person
      </legend>
      <ng-template #oldPersonLegend>
        <legend>Person to be edited: {{ activePerson?.firstName }} {{ activePerson?.lastName }}
        </legend>
      </ng-template>

      <div class="form-group">
        <label class="control-label col-lg-2" for="id">Person ID</label>
        <div class="col-lg-5">
          <input *ngIf="isNewPerson; else idMessage" class="form-control" id="emptyId" type="text"
                 placeholder="ID will be generated by server" formControlName="id" readonly="true"/>
          <ng-template #idMessage>
            <input class="form-control" id="id" type="text"
                   placeholder="{{ activePerson.id }}" formControlName="id" readonly="true"/>
          </ng-template>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="firstName">First Name</label>
        <div class="col-lg-5">
          <input class="form-control" id="firstName" type="text" placeholder="First Name" formControlName="firstName"/>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="lastName">Last Name</label>
        <div class="col-lg-5">
          <input class="form-control" id="lastName" type="text" placeholder="Last Name" formControlName="lastName"/>
        </div>
      </div>

      <div class="form-group" *ngIf="isNewPerson">
        <div class="col-lg-offset-2 col-lg-8">
          <input type="checkbox" [checked]="shouldRedirectToAddressForm"
                 (change)="shouldRedirectToAddressForm = !shouldRedirectToAddressForm"/> After submit forward me to new
          address form
        </div>
      </div>
      <div class="form-group">
        <div class="col-lg-offset-2 col-lg-1">
          <input type="submit" class="btn btn-primary" *ngIf="isNewPerson; else oldPerson" value="Add"
                 [disabled]="!personForm.valid || submitted"/>
          <ng-template #oldPerson>
            <input type="submit" class="btn btn-primary" value="Edit" [disabled]="!personForm.valid || submitted"/>
          </ng-template>
        </div>
        <div class="col-lg-offset-0 col-lg-1">
          <button type="button" class="btn btn-warning" (click)="onBack()">Back</button>
        </div>
      </div>

    </fieldset>
  </form>

  <div *ngIf="formErrors.firstName || formErrors.lastName" class="alert alert-danger">
    <p>{{ formErrors.firstName }}</p>
    <p>{{ formErrors.lastName }}</p>
  </div>

</div>
