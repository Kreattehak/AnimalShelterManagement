<div class="container">
  <form [formGroup]="animalForm" class="form-horizontal" novalidate (ngSubmit)="onSubmit(activeAnimal.id)">
    <fieldset>

      <legend *ngIf="isNewAnimal; else oldAnimalLegend">Add new animal</legend>

      <ng-template #oldAnimalLegend>
        <legend>{{activeAnimal?.type}}to be edited: {{ activeAnimal?.name }} {{ activeAnimal?.subType }}</legend>
      </ng-template>

      <div class="form-group">
        <label class="control-label col-lg-2" for="id">Animal ID</label>
        <div class="col-lg-4">
          <input *ngIf="isNewAnimal; else idMessage" class="form-control" id="emptyId" type="text"
                 placeholder="ID will be generated by server" formControlName="id" readonly/>
          <ng-template #idMessage>
            <input class="form-control" id="id" type="text"
                   placeholder="{{ activeAnimal.id }}" formControlName="id" readonly/>
          </ng-template>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label col-lg-2" for="id">Animal Identifier</label>
        <div class="col-lg-4">
          <input *ngIf="isNewAnimal; else animalIdMessage" class="form-control" id="emptyAnimalIdentifier" type="text"
                 placeholder="Animal Identifier will be generated by server" formControlName="animalIdentifier"
                 readonly/>
          <ng-template #animalIdMessage>
            <input class="form-control" id="animalIdentifier" type="text"
                   placeholder="{{ activeAnimal.animalIdentifier }}" formControlName="animalIdentifier"
                   readonly/>
          </ng-template>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="name">Animal Name</label>
        <div class="col-lg-4">
          <input class="form-control" id="name" type="text" placeholder="Animal Name" formControlName="name"/>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="type">Animal Type</label>
        <div class="col-lg-4">
          <select class="form-control" id="type" [(ngModel)]="selectedValue" formControlName="type">
            <option [disabled]="true" [selected]="true">Select animal type</option>
            <option *ngFor="let type of _animalService.animalTypes" [ngValue]="type.value">{{type.option}}</option>
          </select>
        </div>
      </div>

      <div class="form-group" *ngIf="selectedValue">

        <ng-template [ngIf]="selectedValue !== 'BIRD'">
          <label class="col-md-2 control-label" for="subType">Race</label>
        </ng-template>
        <ng-template [ngIf]="selectedValue  === 'BIRD'">
          <label class="col-md-2 control-label" for="subType">Species</label>
        </ng-template>

        <div class="col-lg-4">
          <select class="form-control" id="subType" formControlName="subType">

            <ng-template [ngIf]="selectedValue  === 'DOG'">
              <option [disabled]="true" [selected]="true">Select race</option>
              <option *ngFor="let race of _animalService.dogRaces" [ngValue]="race.value">{{race.option}}</option>
            </ng-template>
            <ng-template [ngIf]="selectedValue  === 'CAT'">
              <option [disabled]="true" [selected]="true">Select race</option>
              <option *ngFor="let race of _animalService.catRaces" [ngValue]="race.value">{{race.option}}</option>
            </ng-template>
            <ng-template [ngIf]="selectedValue  === 'BIRD'">
              <option [disabled]="true" [selected]="true">Select species</option>
              <option *ngFor="let species of _animalService.birdSpecies" [ngValue]="species.value">{{species.option}}
              </option>
            </ng-template>

          </select>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="availableForAdoption">Available for adoption</label>
        <div class="col-lg-4">
          <select class="form-control" id="availableForAdoption" formControlName="availableForAdoption">
            <option [disabled]="true" [selected]="true">Select animal availability</option>
            <option *ngFor="let type of _animalService.availabilityTypes" [ngValue]="type.value">{{type.option}}
            </option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="dateOfBirth">Date of birth</label>
        <div class="col-lg-4">
          <input class="form-control" id="dateOfBirth" type="text"
                 placeholder="YYYY-MM-DD" formControlName="dateOfBirth"/>
        </div>
      </div>

      <div class="form-group">
        <label class="col-md-2 control-label" for="behaviorDescription">Behaviour description</label>
        <div class="col-lg-5">
          <textarea class="form-control" id="behaviorDescription" type="text" formControlName="behaviorDescription"
                    rows="5">
            Please provide description on animal behavior.
          </textarea>
        </div>
      </div>

      <div class="form-group">
        <div class="col-lg-offset-2 col-lg-1">
          <input type="submit" class="btn btn-primary" *ngIf="isNewAnimal; else oldAnimal" value="Add"
                 [disabled]="!animalForm.valid || submitted"/>
          <ng-template #oldAnimal>
            <input type="submit" class="btn btn-primary" value="Edit" [disabled]="!animalForm.valid || submitted"/>
          </ng-template>
        </div>
        <div class="col-lg-offset-0 col-lg-1">
          <button type="button" class="btn btn-warning" (click)="onBack()">Back</button>
        </div>
      </div>

    </fieldset>
  </form>

  <div *ngIf="formErrors.name || formErrors.type || formErrors.behaviorDescription
  || formErrors.availableForAdoption || formErrors.dateOfBirth" class="alert alert-danger">
    <p>{{ formErrors.name }}</p>
    <p>{{ formErrors.type }}</p>
    <p>{{ formErrors.behaviorDescription }}</p>
    <p>{{ formErrors.availableForAdoption }}</p>
    <p>{{ formErrors.dateOfBirth }}</p>
  </div>

</div>
